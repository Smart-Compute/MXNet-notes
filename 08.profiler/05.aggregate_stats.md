## AggregateStats
```c++
 class AggregateStats {
  public:
   struct StatData {
     enum StatType { kDuration = 1, kCounter = 2, kOther = 4 };
 
     StatType  type_ = kOther;
     size_t    total_count_ = 0;
     uint64_t  total_aggregate_ = 0;
     uint64_t  max_aggregate_ = 0;
     uint64_t  min_aggregate_ = INT_MAX;
   };

   void OnProfileStat(const ProfileStat& stat) { // 
     std::unique_lock<std::mutex> lk(m_);
     stat.SaveAggregate(&stats_[stat.categories_.c_str()][stat.name_.c_str()]);
   }
   /*!
    * \brief Print profliing statistics to console in a tabular format
    * \param sort_by by which stat to sort the entries, can be "avg", "min", "max", or "count"
    * \param ascending whether to sort ascendingly
    */
   enum class SortBy { Avg, Min, Max, Count };
   void DumpTable(std::ostream& os, int sort_by, int ascending);
   void DumpJson(std::ostream& os, int sort_by, int ascending);

   void clear();
 
  private:
   std::mutex m_;
   /* categories => name => stats */
   std::map<std::string, std::unordered_map<std::string, StatData>> stats_;
 };
```
